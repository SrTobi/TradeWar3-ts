# Caddyfile for TradeWar Galaxy
# Provides automatic HTTPS certificates via Let's Encrypt
# Proxies websocket connections to the game server

{$DOMAIN:localhost} {
    # Serve static files for the frontend
    root * /srv
    file_server

    # WebSocket proxy for the game server
    # Handles both ws:// and wss:// connections via /ws path
    handle /ws {
        reverse_proxy localhost:12346
    }

    # Fallback to index.html for SPA routing
    try_files {path} /index.html
}
